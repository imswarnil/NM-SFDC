---
layout: default
title: Search Results
---

<section class="section">
  <div class="container">
    <h1 class="title">Search Results</h1>
    <div id="search-results" class="content"></div>
  </div>
</section>

<script src="{{ '/assets/js/lunr.min.js' | relative_url }}"></script>
<script>
  let idx;

  // Fetch and build Lunr index
  fetch("{{ '/search.json' | relative_url }}")
    .then(response => response.json())
    .then(docs => {
      idx = lunr(function () {
        this.ref('url');
        this.field('title');
        this.field('description');
        this.field('content');

        docs.forEach(doc => {
          this.add(doc);
        });
      });
    });

  function performSearch() {
    const query = document.getElementById('searchInput').value;
    const resultsContainer = document.getElementById('search-results');
    resultsContainer.innerHTML = '';

    if (query.length > 2) {
      const results = idx.search(query);
      if (results.length) {
        results.forEach(result => {
          const doc = docs.find(doc => doc.url === result.ref);
          resultsContainer.innerHTML += `
            <div class="box">
              <article class="media">
                <div class="media-left">
                  <figure class="image is-64x64">
                    <img src="${doc.image}" alt="Placeholder image">
                  </figure>
                </div>
                <div class="media-content">
                  <div class="content">
                    <p>
                      <strong>${doc.title}</strong>
                      <br>
                      ${doc.description}
                      <br>
                      <a href="${doc.url}">Read more</a>
                    </p>
                  </div>
                </div>
              </article>
            </div>
          `;
        });
      } else {
        resultsContainer.innerHTML = '<p>No results found</p>';
      }
    }
  }
</script>

<style>
#search-results .box {
  margin-bottom: 1rem;
}

#search-results img {
  border-radius: 8px;
}

</style>